## Lesson 9: MCP Server with SSE

In our previous lessons on MCP, we learned how to create an MCP Server, a client and we were introduced to some tooling that make developing things for MCP protocol a bit easier. Additionally we learned to improve the client with an LLM. So far, you've been using stdio as transport for your server, but in reality a server may run anywhere on a specific URL for example. For this type of situation there's another transport SSE.

In this chapter you will learn to:

- Create an MCP Server using the SSE transport. 
- Learn to test said server with our Inspector tool.
- Consume an SSE server using Visual Studio Code.

## Setup

If you haven't already, set up your development environment. Here's how you can do it: [Setup your environment](/docs/setup/README.md).

## Related resources

[![Watch a short video about MCP](https://img.youtube.com/vi/YRfOiB0Im64/0.jpg)](https://www.youtube.com/watch?v=YRfOiB0Im64)

_This video explains Model Context Protocol LLM usage._

*ðŸŽ¥ Click on the image above to watch a short video about MCP*

## Narrative: Guardians of Time

> [!NOTE] 
> _Our story so far. You are a mechanic from 1860s London. You were working on your automaton and received a letter from Charles Babbage that ended up taking you to a library where you picked up a time travel device. Throughout your travels in time you've ended up in Florence, where you met Leonardo Da Vinci. You also went to the Aztec empire and this is where the story continues._
>
> See [Lesson 1](../01-intro-to-genai/README.md) if you want to catch up with the story from the beginning. 

> [!NOTE] 
> While we recommend going through the story (it's fun!), [click here](#interact-with-hypatia) if you'd prefer to jump straight to the technical content.

**Ada**: Nice work on implementing AI on the client, that's really a much better experience I think. I almost forgot, we have a meeting to get to.

**You**: We do?

**Ada**: We do, good bye Hedy dearest, see you shortly.

**You**: I thought you said we had to leave?

**Ada**: Ada suddenly smiled at you, before using the Time Beetle.

Back in Ada's mansion you followed Ada as she with very determined steps passed through a number of ornate and impressive rooms and then pulled the doors open to what looked like a meeting in procession. The scene facing you was incredible. A long oval table was at the center of the room and at the table at least 20 people were sitting as you quickly counted them. You couldn't see their faces as they were wearing robes with hoods. 

**You**: Who are these people Ada?

**Ada**: Why the Guardians of course, the Guardians of Time. Quiet down please everyone, we're making good progress, but there's a missing piece, or should I say a missing member.

All heads were directed at Ada now as she continued.

**Ada**: As you know, our effort to protect the timeline and humanities knowledge is not without its challenges and our enemies are on to us. It's therefore imperative that we secure some important intel safeguarded at the moment by Hypatia.

**Hooded figure**: We can't send anyone on such an important mission, I volunteer, the hooded figure said, and you recognized that voice, as you literally spoke minutes ago, Hedy Lamarr. How did she get here before you though?

**Ada** Alright, it's settled then, Hedy, the two of you must secure both the knowledge and ensure Hypatia joins as well in this endevour, is that clear?

**Hedy**: Quite clear.

<div>
  <img src="./assets/guardians.jpeg" alt="guardians around a table" width=600 />
</div>

## Interact with Hypatia

If you want to interact with Hypatia, run the [Characters](/app/README.md) app. 

> [!IMPORTANT]
> This is entirely fictional; the responses are generated by AI.
> [Responsible AI disclaimer](/README.md#responsible-ai-disclaimer)

<div>
  <img src="./assets/hypatia.jpeg" alt="Hypatia" width="300">
</div>

**Steps**:

1. Start a [![GitHub Codespace](https://img.shields.io/badge/GitHub-Codespace-brightgreen)](https://codespaces.new/microsoft/generative-ai-with-javascript)
2. Navigate to _/app_ in the repo root.
3. Locate the console and run `npm install` followed by `npm start`.
4. Once it appears, select the "Open in Browser" button.
5. Chat with Hypatia.

For a more detailed explanation of the app, see [Detailed app explanation](/lessons/01-intro-to-genai/README.md#interact-with-dinocrates).

> [!NOTE]
 > If you're running the project locally on your machine, please review the QuickStart guide to get a [GitHub personal access](../../docs/setup/README.md#creating-a-personal-access-token-pat-for-github-model-access) token setup and replace the key in the code.

## SSE

TODO, explain SSE, talk about conceptually how it's different from stdio
TODO: you will learn that all Time Beetles need to be connected, for that to be possible, you need to add the capability of talking to them remotely using SSE

TODO: what SSE is and can be used for, remote servers but also streaming with LLM streaming responses as example

TODO: explain it's a separate transport than stdio

## How it works

TODO: how it works, explain /sse and /message what goes on in each route and that you need to host it as a web server as it's accessible remotely

### Testing

TODO: explain how CLI and VS Code consumption differs

## Adding SSE

TODO: show step by step how it's added, 
new import
set up routes
business as usual adding tools and resources

## Assignment

TODO: needs to be focused on enhancing a Time Beetle, so you need to create an SSE server with the following features:

- character: talks to an LLM
- places: talks to an LLM
- translate: translate from one language to another
- list-beetles, just need to stub this out, the Time Beetle will do the rest

## Solution

## Knowledge Check

## Summary

## Self-Study Resources
